{"version":3,"sources":["webpack:///./src/pages/login/login.js"],"names":["FormItem","Item","Login","props","start","remove","path","done","obj","Object","keys","sort","map","key","val","Array","isArray","val2","encodeURIComponent","join","e","preventDefault","form","validateFields","err","values","console","log","fetch","method","mode","headers","body","toQueryString","username","userName","password","then","res","json","status","save","token","router","push","bind","getFieldDecorator","handleSubmit","rules","required","message","fontSize","valuePropName","initialValue","Component","create"],"mappings":"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","file":"login.js?da04fca6","sourcesContent":["import {\n\tForm,\n\tIcon,\n\tInput,\n\tButton,\n\tCheckbox\n} from 'antd';\nconst FormItem = Form.Item;\n\nimport React from 'react';\n\nimport cookie from 'react-cookies';\nimport NProgress from 'nprogress';\n\nclass Login extends React.Component {\n\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\tcomponentWillMount() {\n\t\tNProgress.start();\n\t}\n\n\tcomponentDidMount() {\n\t\tcookie.remove('token', {\n\t\t\tpath: '/'\n\t\t});\n\t\tNProgress.done();\n\t}\n\n\n\n\ttoQueryString(obj) {\n\t\treturn obj ? Object.keys(obj).sort().map(function(key) {\n\t\t\tvar val = obj[key];\n\t\t\tif (Array.isArray(val)) {\n\t\t\t\treturn val.sort().map(function(val2) {\n\t\t\t\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(val2);\n\t\t\t\t}).join('&');\n\t\t\t}\n\n\t\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(val);\n\t\t}).join('&') : '';\n\t}\n\n\thandleSubmit(e) {\n\t\te.preventDefault();\n\n\n\n\t\tthis.props.form.validateFields((err, values) => {\n\n\t\t\tif (!err) {\n\t\t\t\tconsole.log('Received values of form: ', values);\n\t\t\t} else {\n\t\t\t\tconsole.log(values, '成功');\n\t\t\t}\n\t\t\tfetch(\"http://127.0.0.1:3001/token\", {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tmode: 'cors',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t},\n\t\t\t\tbody: this.toQueryString({\n\t\t\t\t\tusername: values.userName,\n\t\t\t\t\tpassword: values.password\n\t\t\t\t})\n\t\t\t}).then(function(res) {\n\n\t\t\t\t// res.status = 200;\n\t\t\t\tres.json().then(res => {\n\n\t\t\t\t\tif (res.status) {\n\t\t\t\t\t\tcookie.save('token', res.token, {\n\t\t\t\t\t\t\tpath: '/'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t//登录成功跳转到默认页面\n\t\t\t\t\t\tconsole.log(this.props.router.push('/data/userprofile'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//todo 失败弹出层\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}.bind(this));\n\n\n\t\t});\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tgetFieldDecorator\n\t\t} = this.props.form;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Form onSubmit={this.handleSubmit.bind(this)} className=\"login-form\">\n\n\t\t\t\t <FormItem>\n\t\t          {getFieldDecorator('userName', {\n\t\t            rules: [{ required: true, message: 'Please input your username!' }],\n\t\t          })(\n\t\t            <Input prefix={<Icon type=\"user\" style={{ fontSize: 13 }} />} placeholder=\"Username\" />\n\t\t          )}\n\t\t\t\t </FormItem>\n\t\t\t\t <FormItem>\n\t\t          {getFieldDecorator('password', {\n\t\t            rules: [{ required: true, message: 'Please input your Password!' }],\n\t\t          })(\n\t\t            <Input prefix={<Icon type=\"lock\" style={{ fontSize: 13 }} />} type=\"password\" placeholder=\"Password\" />\n\t\t          )}\n\t\t        </FormItem>\n\t\t        <FormItem>\n\t\t          {getFieldDecorator('remember', {\n\t\t            valuePropName: 'checked',\n\t\t            initialValue: true,\n\t\t          })(\n\t\t            <Checkbox>Remember me</Checkbox>\n\t\t          )}\n\t\t          <a className=\"login-form-forgot\" href=\"\">Forgot password</a>\n\t\t          <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n\t\t            Log in\n\t\t          </Button>\n\t\t          Or <a href=\"\">register now!</a>\n\t\t        </FormItem>\n\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Login = Form.create()(Login);\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.js"],"sourceRoot":""}